// Portfolio Website JavaScript

document.addEventListener('DOMContentLoaded', function() {
    // Navigation active state handling
    const navLinks = document.querySelectorAll('.nav-link');
    const sections = document.querySelectorAll('.section');

    // Update active nav link based on scroll position
    function updateActiveNav() {
        let current = '';
        const scrollPosition = window.scrollY + 200;

        sections.forEach(section => {
            const sectionTop = section.offsetTop;
            const sectionHeight = section.offsetHeight;

            if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                current = section.getAttribute('id');
            }
        });

        navLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href') === '#' + current) {
                link.classList.add('active');
            }
        });
    }

    // Smooth scroll for navigation links
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            const targetSection = document.querySelector(targetId);

            if (targetSection) {
                const offsetTop = targetSection.offsetTop - 80;
                window.scrollTo({
                    top: offsetTop,
                    behavior: 'smooth'
                });
            }
        });
    });

    // Listen for scroll events
    window.addEventListener('scroll', updateActiveNav);

    // Initial call to set active state
    updateActiveNav();

    // Add subtle animation to terminal boxes on scroll
    const terminalBoxes = document.querySelectorAll('.terminal-box');

    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);

    terminalBoxes.forEach(box => {
        box.style.opacity = '0';
        box.style.transform = 'translateY(20px)';
        box.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(box);
    });

    // Typing effect for hero tagline (optional enhancement)
    const tagline = document.querySelector('.hero-tagline');
    if (tagline) {
        tagline.style.opacity = '0';
        setTimeout(() => {
            tagline.style.transition = 'opacity 0.8s ease';
            tagline.style.opacity = '1';
        }, 500);
    }

    // ========================================
    // Interactive Portrait with Reveal Effect
    // ========================================

    const ASCII_ART = `......................................................................................................................................................................................................................................................
......................................................................................................................................................................................................................................................
......................................................................................................................................................................................................................................................
......................................................................................................................................................................................................................................................
......................................................................................................................................................................................................................................................
......................................................................................................................................................................................................................................................
......................................................................................................................................................................................................................................................
......................................................................................................................................................................................................................................................
......................................................................................................................................................................................................................................................
....................................................................................:-:::::::::........................................................................................................................................................
..................................................................................-*%@@@@@@@@@%%%%%%#*=:...............................................................................................................................................
..............................................................................:-#%@@@@@@@@@@@@@@@@@@@@@@@@%*=:........................................................................................................................................
............................................................................=#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%#+:....................................................................................................................................
.........................................................................:*%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%#+-................................................................................................................................
.......................................................................:#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%+:............................................................................................................................
......................................................................*%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=..........................................................................................................................
....................................................................-#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%=........................................................................................................................
...................................................................-#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*:......................................................................................................................
..................................................................:*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#-....................................................................................................................
..................................................................=%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%=...................................................................................................................
.................................................................-%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%+:................................................................................................................
................................................................-%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%#=:..............................................................................................................
...............................................................:#@@@@@@@@@@@@@@%@@@@@@@@@@@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%#*=.......................................................................................................
...............................................................:%@@@@@@@@@@@@@@%@@@@@%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%-.....................................................................................................
...............................................................-@@@@@@@@@@@@@@@@@@%@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*:....................................................................................................
...............................................................=@@@@@@@@@@@@@@@@@@@@@@@@@@@%@@@@@@%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+....................................................................................................
...............................................................-@@@@@@@@@@@@@@@@@%@@@@%@@@@@@@%%%%%@%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%+..................................................................................................
...............................................................:#@@@@@@@@@@@@@@@@@@@@%@@@@@@@@@@@@%@%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*................................................................................................
................................................................:+%@@@@@@@@@@@@@@@@@@@%@@%@@%@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%+................................................................................................
..................................................................:#@@@@@@@@@@@@@@@@@@%@@@%@@@@%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#-..............................................................................................
..................................................................=%@@@@@@@@@@@@@@@@@@%@%%@@@%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%=.............................................................................................
.................................................................-%@@@@@@@@@@@@@@@@@@@@@@@@%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%*:...........................................................................................
.................................................................+@@@@@@@@@@@@@@@@@@@@@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#-..........................................................................................
................................................................-%@@@@@@@@@@@@@@@@@@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%+.........................................................................................
................................................................*%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*:.......................................................................................
...............................................................-@@@@@@@@@@@@@@@@@@@@@@@%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#:......................................................................................
..............................................................:%@@@@@@@@@@@@@@@@@@@@%@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%:.....................................................................................
..............................................................#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%=....................................................................................
.............................................................=%@@@@@@@@@@@@@@@@@@@@@@@@%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%+...................................................................................
............................................................=%@@@@@@@@@@@@@@@@@@@@@@@@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%+..................................................................................
..........................................................-#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%=.................................................................................
.........................................................+%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%@@@@@@@@@@%#*******#%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#-................................................................................
........................................................=%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%#**++*++**++++*#%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*:...............................................................................
......................................................:*%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%****+++***+****+*+***%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*:..............................................................................
......................................................=%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#*++++++*******************#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+..............................................................................
......................................................-%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#******+************************%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%-..............................................................................
......................................................:*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%***********************************#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*:............................................................................
.....................................................:+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%***************************************#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%-............................................................................
.....................................................=%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#*******************************************%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=............................................................................
.....................................................-%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%**********************************************##@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+............................................................................
.....................................................:#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#**********************************************#####@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*............................................................................
.....................................................:*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%****************+======----============++**####****###%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#............................................................................
.....................................................:*%@@@@@@@@@@@@@@@@@@@@@@@@@@@%********+====----------------------========+++***##%%####%@@@@@@@@@@@@@@@@@@@@@@@@@@@@#............................................................................
.....................................................:#@@@@@@@@@@@@@@@@@@@@@@@@@@@#**#*+=====--------------------------=--===+++***####%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@#............................................................................
.....................................................-#@@@@@@@@@@@@@@@@@@@@@@@@@%##++========---------------------------====+*#######%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@=...........................................................................
.....................................................-%%@@@@@@@@@@@@@@@@@@@@@@@%*++++++++====------------------------====++*##%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@%...........................................................................
.....................................................:*%@@@@@@@@@@@@@@@@@@@@@@%#********++++===-------------------======+*#%%%@@@@@@@%%%@@@@@%@@@%%@@@@@@@@@@@@@@@@@@@@@@@@%:..........................................................................
......................................................-#%@@@@@@@@@@@@@@@@@@@%%##%%%%%%%%###**+=======--=-----=-====++++*##%%@@@@@@%%%%%##%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@+..........................................................................
.......................................................=%%@@@@@@@@@@@@@@@@@%%#%%%%%%%%@@@@@%%#*+++++++==========++++***##%%%%%%%#**+++++++++**##%%%%%%@@@@@@@@@@@@@@@@@@@@@@#..........................................................................
.......................................................:*%%%@@@@@@@@@@@@@@%%%%@@@@%%@@@@@@@@@@%###****++++======++**##%%%%%%%#**++++++++++++***##%%%###@@@@@@@@@@@@@@@@@@@@@%:.........................................................................
........................................................-#%%@@@@@@@@@@@@@%%%%%%%%%%%%####%%%%%%%%%#####*+++===++*###%%%%%%##****++++*****#*******#######%@@@@@@@@@@@@@@@@@@@%-.........................................................................
.........................................................=#%%@@@@@@@@@@@@@%%%%%##**+++===+++**###%%%%%###*++==+++*##%%%##**#*+=++**********##*****#######%@@@@@@@@@@@@@@@@@@%-.........................................................................
..........................................................+%%@@@@@@@@@@@@@%%###*+++==========++****###%#*++======+*#####*#*++*#%%%@%@@#%%%%###*********###%@@@@@@@@@@@@@@@@@%:.........................................................................
...........................................................+%@@@@@@@@@@@@%###**+++++**++*++++****##****##*==-===++*###***++*#*=%%#%%%@*+*#%%%%#**++*****###%@@@@@@@@@@@@@@@@%..........................................................................
............................................................+%@@@@@@@@@@@##**+++**##+++*#%%%%##****#******+==--==+*##*+++*#*=--+%@@@@#==+*####***+++****###%%@@@@@@@@@@@@@@@*..........................................................................
.............................................................*%%@@@@%@@@@#*******#**#%##@%**##%####**++++++======+*##*==**+===--=+**++=++*******+*******####%@@@@@@@@@@@@@@@=..........................................................................
.............................................................:%%@@@%%@@@%*******##%%%*==%@@@@@%=-=+#*+=++++==--==+**#*+++========++++++++***+++++++*****####%%@@@@@@@@@@@@@@:..........................................................................
..............................................................=%%@@%%@@@%**+****#%%#*+=--*##%#====+++=+++++==---=++****++====++++++++++++++=+++++++****####%%%@@@@@@@@@@@@@%...........................................................................
...............................................................#%@@%%@@@#*+++++++*****+++=====++++++===++++==---==+*****++=====================+++++***####%%@@@@@@@@@@@@@@+...........................................................................
...............................................................:#%%%%@@@#*+++++++++*+++++++++++++=====+++++==----=+*****++======================++++***###%%%@@@@@@@@@@@@@%:...........................................................................
................................................................:#%%%@@@#***+++++++++++================++++===--===+****+++=============-========++****##%%%%@@@@@@@@@@@%%+............................................................................
.................................................................-%%%@@%#**++++++=========----==-=====++=+++===-===+*****+++=======-----=---=====++***###%%%@@@@@@@@@%%%%*:............................................................................
..................................................................*%%@@%%****++++=============----====++++++===-===++*****+++====----=-------=====+***###%%%@@@@%%%%@@%%+..............................................................................
..................................................................-#%%@%%#**++++======-----------====+=++++====--===++******+===-------------====+++**###%%%@@@@%%@@@@#-...............................................................................
...................................................................=#%%%%#**++++====-------------=====+++++==----====++*#**+**====---------======++**###%%%@@@@@@@@@@%=................................................................................
...................................................................:+%%%%%**+++=====------------=====+++++===-------==+***+++*#+================+++**##%%%%@@@@@@@@@%*:................................................................................
....................................................................=%%@@%#*++++====------------====++++++===--::---=+++*++++*##*+=+==========++++**##%%%%%@@@@@@@@@%+-................................................................................
....................................................................-#%@@%%**++====-----------=====++===++++========+++*+*+++*##*++++****++===+++**###%%%%%@@@@@%@%%#=:................................................................................
.....................................................................*%@@@%#**++======------====+==+======++++++=++**###%%%%####*+++++++*##*++++***###%%%%@@@@@@@%@%%+:................................................................................
....................................................................:*%@@@%##**++============++=====++++*#%%%%#####%%%%%%%%%%###*****######%#*++**###%%%%%%@@@@@@@%@%*:................................................................................
....................................................................:+%@@@%%##*+++=========+*+++===+++#%%%%%%%%#%%%%%%%%%%%%%%#%%%#%%%%%%%%%%%****##%%%%%%%@%@@@%@%%%*-................................................................................
....................................................................:=#@@@@%%%#**+++=====+*#*++++++++**##%%%%##%#+*#%%@%%%@@@@%%%%%%%%%#%%%%%%#****#%%%%%%@@@%@@%@@%%#=................................................................................
...................................................................:=*#%%@%%%%%#**+++==+*#%###******##%%%%%%%%%%#**#%%%#%%%%%%%##%%%%%%%@%%%%%%####%%%%%%%%@@%@@@@@%%#=:...............................................................................
....................................................................-**#%%%@%%%%#**++++#%%%%%%%%%#%#%%%%%%###*+++++===++*******###%%@@%%#%%%%%%%##%%%%%%%@@%@@@@@%@@%%+................................................................................
....................................................................:*#*#%@%%%%%##***+*#%%%%%%#%#########***+=====++++++++***#######*++*+*####%%%%%%%%%@%@@@@@@@@@%%%#-................................................................................
.....................................................................-##%%%@@%%%%##****#%%%%%%%%#####*****++++++++++++++***+++++++++*++++****#%%%%%%%%@%%@@%@@@@@@%@%*:................................................................................
......................................................................=#%%%@%%%%%%##**#%%%%%%%%%######******++++++++========+++++***+++++++**##%%%%@@%%@@@@@@@@@@@%%*-.................................................................................
......................................................................:+%%@%%@%%%%%%##%%%###*++==++++=+++++======------====+++++*****++++++**##%%%%%@%%@@@@@@@@@@@@#-...................................................................................
.......................................................................:*%%@%%%%%%%%%%%%##**+++==+++++++====--------======+++++++*****+*+**##%%%%%%%@@%%@@@@@@@@@@#:....................................................................................
........................................................................=%@@%%%%%%%%%%%%##**++++==++++++++===============++++++**********###%%%%@%%%%@%@@@@@@@@@%%=-....................................................................................
........................................................................:+%@@@@%@@%%%%%%###**+++++++++++============+++++++**************###%%%@@@%%%%@@@@@@@@@@@%*=....................................................................................
.........................................................................:#@@%@@@%%%%%%%%###***++++++++++++++++++++++**######**********####%%%@@@@%@@@@@%@@@@@@@@@%#-...................................................................................
..........................................................................=%@@@@@%%%%%%%%%%#*****++++++++******####**#####%#**********#####%%%@@@@@@@@%%@@@@@@@@@@%#+:..................................................................................
..........................................................................:+%@@@@@%@%%%%%%%%###****+*++++++***#######%%%####*********##%%%%%%@@@@@@@@%%@@@@@@@@@@@%#*=..................................................................................
...........................................................................+%%@@@@@@@%@@@@%%%######****++++*****##%######*********#####%%%%%%@@@@@@@@%@@@@@@@@@@@%#*++-................................................................................
...........................................................................:+%@@@@@@@@@@@@@%%%%%%%##*#***++++++***#*+***#******#####%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@#+====--:............................................................................
............................................................................:+%@@@@@@@@@@@@@@%%%%%%%###*****************###**####%%%%%%%@@@%@@@@@@@@@@@@@@@@@@@@@%+++====+*+-.........................................................................
.............................................................................:+%@@@@@@@@@@@@@%%%%%%%%%#########*#####*#########%%%%%%%%%@%@@%@@@@@@@@@@@@@@@@@%@%+========**++:........................................................................
..............................................................................:+%%%@@@@@@@@@@%%%%%%%%%%%%%%%######%#%%%##%%%%%%%%%%%%%%%%%@@@%@@@@@@@@@@@@@@@%@%+===--=---+*+++-......................................................................
...............................................................................:=#%%%@%%%@@@@@@@%%%%%%%%%%%%%%%#%%%%%%%%%%%%%%%%%%%%%%%%@%@@@@@@@@@@@@@@@@@@@@%+==--------++++++=.....................................................................
.................................................................................=*#%%##%%%@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@%@@@@@@@@@@@@@@@@@@@@#===--------=++++++++-...................................................................
...................................................................................:-=-=#%@@%%%%%%@%%%@%%%%%%%%%%%%%%%%%%%%%%%%@%%%%%@@@@@@@@@@@@@@@@@@@@@@%#=-----------==++++++++=:.................................................................
.......................................................................................:+%%%%%%%%%%%@%%%%%%%%%%@%%%%%@%@%%%@%@%%%%%@@@@@@@@@@@@@@@@@@@@@@@%*-------::::-====+++++++++=:...............................................................
........................................................................................+#%%%%%%%%%@@@@%%%@%%%%@@%%%%@@%@%%%@@@@%%@@@@@@%@@@@@@@@@@@@@@@@%*---:::::::::-=======++=======-.............................................................
........................................................................................:*#+==++*###@@@@@@@%@%%@%%%@%%@@@%@%@@@@@@@@@@@@@@@@@@@@@@@@@@@%#=-:::::::::::----=================:............................................................
........................................................................................:+#=-:=*%%%%@@@@@@@@@@@@@@%@@@@@@@@%@@@@@@@@@@@@@@@@@@@@@@@%%%%+-::::::::::::-----==========-========:.........................................................
.........................................................................................-*+=--*#*%@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%*-::::::::::::::-----==========------====-........................................................
.........................................................................................:-=*==::++%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%=-:::::::::::.:::----=-======---------=--==:.......................................................
..........................................................................................:-=+-.:*#+#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%@@@@%%%%%+-::::::::::::..::------====------=----------===-....................................................
............................................................................................:.-::=-*+%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%*=-:::::::::::::::---------=-==----------------======-.................................................
.................................................................................................:=-+#%%%%%@@@@@%%@@@@@@@@@@@@@@%%@%%%%%%%%%%%#=-::::::::::::..:----------=----=------------:--=========-:..............................................
....................................................................................................:=#%%%%%%%%%@@@@@@@@%@@@@%%%%%%%%%%%%%%%#=--:::::::::..::.:---:----------------------------==-=========-:............................................
.....................................................................................................=#%%%%%%%%%%%@@@@@@%%@%%%%%%%%%%%%%%%#=-::::::::::......:--:------------=------------::---==--=-=========-:.........................................
.....................................................................................................-*#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#=-::::::::::.......::-------------------------::-::---====---===========-:.......................................
.....................................................................................................-+#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*-::::::::::.........:::--:----------------------:--::---===-------===========-:......................................
.....................................................................................................:=#%%%%%%%%##################%#+-::::::::............::::-:::---------------------:--------==-----------==========--:....................................
.....................................................................................................:-*%%%%%%###################*=:.....................::--:::::-----------------:-::-:::-----==---------=-----==========-:..................................
......................................................................................................:+#%%%###################+:.....................::-::-::::::--:---------------::---------=----------=-------===========-:................................
.......................................................................................................=*####%#############*+-....................:::-::::::::::----:------------::-::--------=----------==-------===========-:..............................
........................................................................................................-*##################+-..................::-::::::::::.:::--:-------------:-::-------------::-------==---------==========--.............................
..........................................................................................................:=+**###########+=:...............::-::::::::::..:::-:::-----------:----------:::::----:---------=--------------------===-:..........................
.............................................................................................................:-=++***####*++=-:...........::-:::::::.....:::--:::---------::-::----::.::::--:-----:---------=------------=----------=--:.......................
...............................................................................................................:-=+++****++====-:......::-::::::::.....:::---:::--------:-----------::.::--:------:---------==----------------------:-----:.......................
..................................................................................................................:-=+***+++=======--:-:::::::.......::----:::--------:----------:::::---:-------::--------=------------------------------------:....................
.....................................................................................................................:=+***+++=====--:::::........:::-----::---------:-------:::.:::-::--------:---------==--------------------------------------::..................
.........................................................................................................................:-=+**++====-::::.....:::--:-::-::----------:-----::::.:::----------:----------==-----------------------------------------::................
.............................................................................................................................:-=++++===-:.....:-----:---::----------::---::::.::-:----------:-----------==-------------------------------------------:...............
...............................................................................................................................:---===-:..:::------::::-----------::---:::.:--::-----------:-----------==-------------------------------------------:...............
.................................................................................................................................::::::--::::::-----------:-----:.:-::--:----------::-----------=-------------------------------------------:................
.....................................................................................................................................::::-:::-::-----::----::::--:-::-----------::-----------=-------------------------------------------:................
....................................................................................................................................:-----:--:--------:---::.::-:--:-----------:------------==------------------------------------------:.................
....................................................................................................................................::-------:--------:---:..:-:---:----------:------------=--------:------------------------------------:..................
....................................................................................................................................::---------:------:----:::--:--:---------:------------==---------:-----------------------------------::..................
....................................................................................................................................:::--------:------:--:-:::-::-:-------::-------------=------------:-------------------------------:-:....................
....................................................................................................................................::::-:------::----::--:--:---------::--------------==-------------:-:----------------------------:-:.......................
....................................................................................................................................:-:::-------::-----:----:------:----:::-----------=--::-::--::::---::---:-------------------------:........................
...................................................................................................................................::-:::--------:------:----------:::-::-----------==-::--::---::::-::::----:::::::---------------------::........................
...................................................................................................................................::--::-------::-::-----:--------::-::-::-------:-=-:--:--::-::::-:::::---::::::-----::::-:--:---------:::......................
..................................................................................................................................:-::-::::---:::-::----:---------:--:--:---:::-:-=-:--:---::-:--:-:------::-:::--:::--:-:--:-::-------::::.......................`;

    // Initialize Interactive Portrait
    const portraitContainer = document.getElementById('interactivePortrait');
    const asciiCanvas = document.getElementById('asciiCanvas');
    const revealCanvas = document.getElementById('revealCanvas');
    const portraitImage = document.getElementById('portraitImage');

    if (portraitContainer && asciiCanvas && revealCanvas && portraitImage) {
        initInteractivePortrait();
    }

    function initInteractivePortrait() {
        const asciiCtx = asciiCanvas.getContext('2d');
        const revealCtx = revealCanvas.getContext('2d');

        // Set canvas dimensions
        function resizeCanvases() {
            const rect = portraitContainer.getBoundingClientRect();
            const dpr = window.devicePixelRatio || 1;

            asciiCanvas.width = rect.width * dpr;
            asciiCanvas.height = rect.height * dpr;
            revealCanvas.width = rect.width * dpr;
            revealCanvas.height = rect.height * dpr;

            asciiCanvas.style.width = rect.width + 'px';
            asciiCanvas.style.height = rect.height + 'px';
            revealCanvas.style.width = rect.width + 'px';
            revealCanvas.style.height = rect.height + 'px';

            asciiCtx.scale(dpr, dpr);
            revealCtx.scale(dpr, dpr);

            drawAsciiArt();
        }

        // Draw ASCII art on canvas
        function drawAsciiArt() {
            const rect = portraitContainer.getBoundingClientRect();
            const lines = ASCII_ART.split('\n');

            asciiCtx.fillStyle = '#f5f5f5';
            asciiCtx.fillRect(0, 0, rect.width, rect.height);

            // Calculate font size to fit
            const charWidth = rect.width / (lines[0] ? lines[0].length : 200);
            const charHeight = rect.height / lines.length;
            const fontSize = Math.min(charWidth * 1.8, charHeight * 1.2, 3);

            asciiCtx.font = `${fontSize}px monospace`;
            asciiCtx.fillStyle = '#2596be';
            asciiCtx.textBaseline = 'top';

            lines.forEach((line, i) => {
                asciiCtx.fillText(line, 0, i * (fontSize * 0.9));
            });
        }

        // Reveal trail management
        const revealTrails = [];
        const TRAIL_LIFETIME = 45000; // 45 seconds
        const BRUSH_SIZE = 40;

        function addRevealPoint(x, y) {
            revealTrails.push({
                x: x,
                y: y,
                timestamp: Date.now(),
                size: BRUSH_SIZE + Math.random() * 20
            });
        }

        function drawRevealMask() {
            const rect = portraitContainer.getBoundingClientRect();
            const now = Date.now();

            // Clear reveal canvas
            revealCtx.clearRect(0, 0, rect.width, rect.height);

            // Filter out expired trails
            for (let i = revealTrails.length - 1; i >= 0; i--) {
                if (now - revealTrails[i].timestamp > TRAIL_LIFETIME) {
                    revealTrails.splice(i, 1);
                }
            }

            if (revealTrails.length === 0) {
                portraitImage.style.opacity = '0';
                return;
            }

            // Show image
            portraitImage.style.opacity = '1';

            // Create clipping mask for ASCII canvas
            asciiCtx.save();
            asciiCtx.globalCompositeOperation = 'destination-out';

            revealTrails.forEach(trail => {
                const age = now - trail.timestamp;
                const fadeProgress = age / TRAIL_LIFETIME;
                const opacity = 1 - fadeProgress;

                if (opacity > 0) {
                    // Draw on reveal canvas (shows the image)
                    revealCtx.beginPath();
                    revealCtx.arc(trail.x, trail.y, trail.size, 0, Math.PI * 2);
                    revealCtx.fillStyle = `rgba(255, 255, 255, ${opacity})`;
                    revealCtx.fill();

                    // Create jagged brush effect
                    for (let j = 0; j < 8; j++) {
                        const angle = (j / 8) * Math.PI * 2;
                        const jitter = (Math.random() - 0.5) * trail.size * 0.5;
                        const px = trail.x + Math.cos(angle) * (trail.size * 0.7 + jitter);
                        const py = trail.y + Math.sin(angle) * (trail.size * 0.7 + jitter);

                        revealCtx.beginPath();
                        revealCtx.arc(px, py, trail.size * 0.3, 0, Math.PI * 2);
                        revealCtx.fillStyle = `rgba(255, 255, 255, ${opacity * 0.7})`;
                        revealCtx.fill();
                    }
                }
            });

            // Create mask effect - cut holes in ASCII canvas
            asciiCtx.globalCompositeOperation = 'destination-out';
            revealTrails.forEach(trail => {
                const age = now - trail.timestamp;
                const fadeProgress = age / TRAIL_LIFETIME;
                const opacity = 1 - fadeProgress;

                if (opacity > 0) {
                    asciiCtx.beginPath();
                    asciiCtx.arc(trail.x, trail.y, trail.size, 0, Math.PI * 2);
                    asciiCtx.fillStyle = `rgba(0, 0, 0, ${opacity})`;
                    asciiCtx.fill();

                    // Jagged edges
                    for (let j = 0; j < 8; j++) {
                        const angle = (j / 8) * Math.PI * 2;
                        const jitter = (Math.random() - 0.5) * trail.size * 0.5;
                        const px = trail.x + Math.cos(angle) * (trail.size * 0.7 + jitter);
                        const py = trail.y + Math.sin(angle) * (trail.size * 0.7 + jitter);

                        asciiCtx.beginPath();
                        asciiCtx.arc(px, py, trail.size * 0.3, 0, Math.PI * 2);
                        asciiCtx.fillStyle = `rgba(0, 0, 0, ${opacity * 0.7})`;
                        asciiCtx.fill();
                    }
                }
            });
            asciiCtx.restore();

            // Redraw ASCII art then apply mask
            drawAsciiArt();

            // Apply the reveal mask
            asciiCtx.save();
            asciiCtx.globalCompositeOperation = 'destination-out';
            revealTrails.forEach(trail => {
                const age = now - trail.timestamp;
                const fadeProgress = age / TRAIL_LIFETIME;
                const opacity = 1 - fadeProgress;

                if (opacity > 0) {
                    asciiCtx.beginPath();
                    asciiCtx.arc(trail.x, trail.y, trail.size, 0, Math.PI * 2);
                    asciiCtx.fillStyle = `rgba(0, 0, 0, ${opacity})`;
                    asciiCtx.fill();
                }
            });
            asciiCtx.restore();
        }

        // Mouse interaction
        let isMouseOver = false;
        let lastX = 0;
        let lastY = 0;

        portraitContainer.addEventListener('mouseenter', () => {
            isMouseOver = true;
        });

        portraitContainer.addEventListener('mouseleave', () => {
            isMouseOver = false;
        });

        portraitContainer.addEventListener('mousemove', (e) => {
            if (!isMouseOver) return;

            const rect = portraitContainer.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            // Add points along the path for smooth trail
            const dx = x - lastX;
            const dy = y - lastY;
            const distance = Math.sqrt(dx * dx + dy * dy);

            if (distance > 5) {
                const steps = Math.ceil(distance / 10);
                for (let i = 0; i < steps; i++) {
                    const t = i / steps;
                    addRevealPoint(lastX + dx * t, lastY + dy * t);
                }
            }

            addRevealPoint(x, y);
            lastX = x;
            lastY = y;
        });

        // Touch support
        portraitContainer.addEventListener('touchstart', (e) => {
            e.preventDefault();
            isMouseOver = true;
            const touch = e.touches[0];
            const rect = portraitContainer.getBoundingClientRect();
            lastX = touch.clientX - rect.left;
            lastY = touch.clientY - rect.top;
        });

        portraitContainer.addEventListener('touchmove', (e) => {
            e.preventDefault();
            const touch = e.touches[0];
            const rect = portraitContainer.getBoundingClientRect();
            const x = touch.clientX - rect.left;
            const y = touch.clientY - rect.top;

            const dx = x - lastX;
            const dy = y - lastY;
            const distance = Math.sqrt(dx * dx + dy * dy);

            if (distance > 5) {
                const steps = Math.ceil(distance / 10);
                for (let i = 0; i < steps; i++) {
                    const t = i / steps;
                    addRevealPoint(lastX + dx * t, lastY + dy * t);
                }
            }

            addRevealPoint(x, y);
            lastX = x;
            lastY = y;
        });

        portraitContainer.addEventListener('touchend', () => {
            isMouseOver = false;
        });

        // Animation loop
        function animate() {
            drawRevealMask();
            requestAnimationFrame(animate);
        }

        // Initialize
        portraitImage.onload = () => {
            resizeCanvases();
            animate();
        };

        // Handle image already loaded
        if (portraitImage.complete) {
            resizeCanvases();
            animate();
        }

        // Handle resize
        window.addEventListener('resize', () => {
            resizeCanvases();
        });
    }

    // Console message for visitors who check dev tools
    console.log('%c Welcome to my portfolio!', 'color: #7c3aed; font-size: 20px; font-weight: bold;');
    console.log('%c Thanks for checking out the code.', 'color: #666; font-size: 14px;');
});
